\documentclass[12pt,oneside,a4paper]{report}
\usepackage{polski}
\usepackage[cp1250]{inputenc}
\usepackage{mdwlist}
\usepackage{enumitem}
\usepackage{geometry}
 \geometry{
	a4paper,
	total={170mm,257mm},
	left=30mm,
	right=30mm,
	top=20mm,
}
\usepackage{graphicx}
\usepackage{sidecap}
\usepackage{wrapfig}
\usepackage{indentfirst}
\usepackage{color}
\usepackage{hyperref} 
\hypersetup{
	colorlinks=true,
	linkcolor=black,
	filecolor=magenta,      
	urlcolor=cyan,
}
\usepackage{setspace}
\usepackage{blkarray}
\usepackage{longtable}
\usepackage{lipsum}
\singlespacing 
\setlength{\parindent}{25pt}
\setlength{\parskip}{5pt}
\pagestyle{plain}
\usepackage{pdflscape}
\frenchspacing
\widowpenalty=10000
\clubpenalty=10000
\usepackage[tableposition=top]{caption}
\makeatletter
\newcommand{\linia}{\rule{\linewidth}{0.4mm}}
\renewcommand{\maketitle}{\begin{titlepage}
		\vspace*{-2.5cm}
		\begin{center}\small
			Politechnika Poznañska\\
			Wydzia³ Elektryczny\\
			Instytut Automatyki i In¿ynierii Informatycznej
		\end{center}
		\vspace{5cm}
		\noindent\linia
		\begin{center}
			\LARGE \textsc{Projekt Zespo³owy}\\
			\Large {Inteligentny zamek}
		\end{center}
		\linia
		\vspace{1cm}
		\begin{flushright}
			\begin{minipage}{7cm}
				\textit{\small Autorzy:}\\
				\normalsize \textsc{Maciej Marciniak}\\
				\normalsize nr indeksu: 121996\\
				\normalsize e mail: \\
				maciej.r.marcniak@student.put.poznan.pl\\\\
				\normalsize \textsc{Damian Filipowicz}\\
				\normalsize nr indeksu: 122002\\
				\normalsize e mail: \\
				Damian.Filipowicz@student.put.poznan.pl \par
			\end{minipage}
		\end{flushright}
		\vspace*{\stretch{6}}
		\begin{center}
			\@date
		\end{center}
	\end{titlepage}%
}
\makeatother
\usepackage[none]{hyphenat}
\renewcommand{\figurename}{Rysunek}
\begin{document}
	\sloppy
	\maketitle
	\newpage 
	\tableofcontents
	\newpage 
	\chapter*{Wstêp}
	Inteligentny zamek powinien byæ systemem, który ma na celu zast¹pienie starego modelu zabezpieczeñ ró¿nego rodzaju drzwi i skrytek w którym u¿ywano tradycyjnych kluczy, czy szyfrów na klucze cyfrowe, którymi bêdzie mo¿na pos³ugiwaæ siê przy pomocy smartfonów z funkcj¹ bluetooth. Celem tego rodzaju usprawnieñ bêdzie wyeliminowanie z ¿ycia codziennego sytuacji w których u¿ytkownik musi posiadaæ pêki kluczy. Zamiast tego dziêki temu systemowi mo¿e wszystkie klucze przechowywaæ w jednym miejscu (smartfonie).
	
	System sk³adaæ siê bêdzie z:
	\noindent \begin{itemize*}
		\item urz¹dzenia steruj¹cego:
		\begin{itemize*}
			\item mikrokomputera Raspberry Pi 3,
			\item serwomechanizmu / elektronicznego zamka,
		\end{itemize*}
		\item aplikacji mobilnej,
		\item aplikacji serwerowej obs³uguj¹cej bazê danych.
	\end{itemize*}
	
	System bêdzie spe³nia³  wymagania dotycz¹ce bezpieczeñstwa poprzez zastosowanie szeregu funkcji kryptograficznych przy procesie uwierzytelniania jak i przy generowaniu kluczy takich jak np. funkcje skrótu, SSH, algorytmów szyfrowania asymetrycznego, systemu zarz¹dzaniem kluczem publicznym (podpisu cyfrowego).
	
	U¿ywane klucze bêd¹ posiada³y podpis cyfrowy, który jednoznacznie bêdzie definiowa³ w³aœciciela oraz stempel czasowy do okreœlania wa¿noœci. Klucze bêd¹ mog³y mieæ w zale¿noœci od przeznaczenia ró¿ne okresy przedawnienia, np. w³aœciciel mieszkaj¹cy  w danym domu posiadaæ bêdzie klucz o d³ugim terminie wa¿noœci, a goœcie klucz jednorazowy b¹dŸ kilku godzinny bez mo¿liwoœci odnowienia. Wszelkie dane dostêpowe bêd¹ generowane i dystrybuowane na serwerze systemu, z mo¿liwoœci¹ zdalnej proœby o utworzenie kluczy tylko przez uprawnione przez administratora osoby.
	
	Ogólny schemat systemu znajduje siê na Rysunku \ref{diagram:diagram wdro¿eñ}.
	\begin{figure}[!h]
		\centering
		\includegraphics[width=16cm]{Obrazy/Schemat_ogolny_inteligentnego_zamka.png}
		\caption{Diagram wdro¿eñ}
		\label{diagram:diagram wdro¿eñ}
	\end{figure}
	\chapter{Aktorzy systemu}
	W systemie Inteligentnego zamka wyró¿niamy nastêpuj¹cych aktorów:
	\begin{itemize*}
		\item \textbf{RaspberryPi} - jest to mikrokomputer Raspberry Pi 3 steruj¹cy zamkiem,
		\item \textbf{serwomechanizm/elektrozamek} - jest to urz¹dzenie s³u¿¹ce \linebreak do odblokowania/zablokowania zamka,
		\item \textbf{urz¹dzenie mobilne} - jest to urz¹dzenie posiadaj¹ce system operacyjny, \linebreak z funkcj¹ bluetooth oraz posiadaj¹ce mo¿liwoœæ instalacji aplikacji,
		\item \textbf{aplikacja serwerowa} - jest to program znajduj¹cy siê na serwerze z dostêpem globalnym poprzez Internet,
		\item \textbf{u¿ytkownik} - jest to osoba fizyczna operuj¹ca urz¹dzeniem mobilnym, chc¹ca uzyskaæ dostêp do zamka.
	\end{itemize*}
	U¿ytkowników dodatkowo dzieli siê na grupy ze wzglêdu na uprawnienia w systemie:
	\begin{itemize*}
		\item \textbf{goœæ} - posiada najni¿sze uprawniania, mo¿e jedynie posiadaæ klucze o krótkim okresie wa¿noœci, nie mo¿e generowaæ nowych kluczy ani udostêpniaæ ich,
		\item \textbf{u¿ytkownik zalogowany} - posiada uprawnienia goœcia, dodatkowo przechowywaæ mo¿e klucze o sta³ym dostêpie do zamka (np. dostêp przez ca³y dzieñ),
		\item \textbf{administrator} - mo¿e wykonywaæ wszystkie czynnoœci zwi¹zane \linebreak z uprawnieniami goœcia i u¿ytkownika zalogowanego, dodatkowo posiada dostêp do statystyk historii zamka, decyduje o rejestracji u¿ytkowników zalogowanych.
	\end{itemize*}
	\chapter{Opis sk³adowych systemu}
	\section{Urz¹dzenie steruj¹ce}
	Zadaniem urz¹dzenia steruj¹cego, w którego sk³ad wchodziæ bêd¹ Raspberry Pi 3 oraz serwomechanizm/zamka elektronicznego jest weryfikacja klucza cyfrowego przesy³anego przez urz¹dzenie mobilne oraz otwieranie zamka przy pozytywnym wyniku weryfikacji.
	
	Oprogramowanie mikrokomputera obejmuje system Linux raspbian-jessie oraz szereg podprogramów napisanych w jêzyku Python. Skrypty programów ³¹cz¹ siê do serwera w celu pobrania informacji o poprawnoœci i daty wa¿noœci certyfikatu dostêpu.Jeœli dane bêd¹ poprawne to zostaje wysterowany serwomechanizm, który otwiera zamek, w przeciwnym przypadku u¿ytkownik zostanie poinformowany o odmowie dostêpu, a nieudana próba dostania siê do systemu zarejestrowana zostanie w bazie danych wraz z danymi w³aœciciela klucza.
	
	Funkcjonalnoœæ urz¹dzenia steruj¹cego przedstawiona zosta³a w Tabeli \ref{tab:wymagania_urz¹dzenie_steruj¹ce}.
	\begin{longtable}[!ht]{|p{3.5cm}|p{7.5cm}|p{3.7cm}|} 
		\caption{Tabela wymagañ funkcjonalnych urz¹dzenia steruj¹cego}
		\label{tab:wymagania_urz¹dzenie_steruj¹ce}\\
		\hline	
		Funkcja & Opis & Aktorzy \\	\hline
				Parowanie  urz¹dzeñ  bluetooth & Parowanie bluetooth urz¹dzenia mobilnego z Raspberry Pi & RaspberryPi,  Urz¹dzenie mobilne \\ \hline
				Nas³uchiwanie po³¹czenia bluetooth & Oczekuje na przychodz¹ce po³¹czenia bluetooth & RaspberryPi \\ \hline
				Nawi¹zanie po³¹czenia bluetooth & Ka¿da próba nawi¹zania po³¹czenia bluetooth zostanie zaakceptowana & RaspberryPi, Urz¹dzenie mobilne \\ \hline
				Pobranie pliku z kluczem cyfrowym przez bluetooth & Przesy³anie pliku z kluczem dostêpowym z urz¹dzenia mobilnego do Raspberry Pi poprzez bluetooth & RaspberryPi, Urz¹dzenie mobilne, Goœæ \\ \hline
				Weryfikacja poprawnoœci klucza cyfrowego & Porównanie danych z bazy danych z otrzymanymi w kluczy dostêpowym & RaspberryPi, 
				Aplikacja serwerowa \\ \hline
				Otwarcie zamka & Otwarcie zamka poprzez wys³anie sygna³u PWM do serwomechanizmu lub zezwolenie zamka elektronicznego & RaspberryPi, Serwomechanizm/ elektrozamek \\ \hline
				Zamkniêcie zamka & Zamkniêcie zamka poprzez wys³anie sygna³u PWM do serwomechanizmu lub zezwolenie zamka elektronicznego & RaspberryPi, Serwomechanizm/ elektrozamek \\ \hline
				Rejestracja próby dostêpu & Zapis ka¿dej pozytywnej i negatywnej próby weryfikacji klucza cyfrowego w tabeli bazy danych & RaspberryPi \\ \hline
				Deszyfracja certyfikatu u¿ytkownika & Deszyfracja pliku z certyfikatem dostêpowym u¿ywaj¹c klucza publicznego u¿ytkownika & RaspberryPi \\ \hline
				Pobranie awaryjnego klucza dostêpu & Umo¿liwia wczytanie specjalnego has³a 512-bitowego do Raspberry Pi, który otwiera zamek bez koniecznoœci dostêpu do Internetu & RaspberryPi, Aplikacja mobilna,	Administrator \\ \hline
		\end{longtable}
	
	\textbf{Wymagania pozafunkcjonalne:}
	\begin{itemize*}
		\item jednoczeœnie mo¿e byæ weryfikowany tylko jeden u¿ytkownik,
		\item zasiêg po³¹czenia bluetooth to maksymalnie 15m,
		\item niezbêdny dostêp do Internetu do po³¹czenia z aplikacj¹ serwerow¹ przy weryfikacji kluczy,
		\item narzut czasowy zwi¹zany z weryfikacj¹ poprawnoœci klucza cyfrowego zale¿ny od parametrów serwera i sieci,
		\item niezbêdny ci¹g³y dostêp do zasilania 5V o pr¹dzie co najmniej 2.5A,
		\item ograniczenia pr¹dowe dla serwomechanizmu lub zamka elektronicznego,
		\item narzut czasowy zwi¹zany z uruchomieniem urz¹dzenia - maksymalnie 20 sekund.
	\end{itemize*}
\newpage
	\section{Aplikacja mobilna}
	Aplikacja mobilna w jêzyku Java na platformê Android ma na celu przechowywanie  w pamiêci smartfona klucze cyfrowe u¿ytkownika oraz mo¿liwoœæ komunikacji z cz³owiek-zamek-serwer. Program posiadaæ powinien interfejs graficzny, dziêki któremu bêdzie mo¿na wybraæ, który zamek chce siê otworzyæ w danej chwili. Klucz cyfrowy przesy³any bêdzie bezprzewodowo do komputera steruj¹cego zamkiem za pomoc¹ sieci bluetooth. Aplikacja powinna posiadaæ równie¿ funkcjê generowania kluczy tymczasowych, które mo¿na udostêpniaæ osobom postronnym z ustalonym okresem wa¿noœci (jednorazowy, godzinny, od poniedzia³ku do pi¹tku w godzinach od 8 do 16 itp.). W tym celu zostaje wys³ana proœba do serwera poprzez Internet o wygenerowanie klucza o okreœlonych parametrach.
	
	Klucze przesy³ane przez bluetooth powinny byæ szyfrowane algorytmem RSA (kluczem prywatnym). Klucz prywatny otrzymywany wraz z certyfikatem przypisany jest tylko do jednego zamka i przekazywany wraz z nim. W celu przeniesienia klucza dostêpowego na inne urz¹dzenie nale¿y wyeksportowaæ klucz, a nastêpnie importowaæ do nowego urz¹dzenia. 
	
	Funkcjonalnoœæ aplikacja przedstawiona zosta³a w Tabeli \ref{tab:wymagania_aplikacja_mobilna}.
	
	\begin{longtable}[!ht]{|p{3.5cm}|p{7cm}|p{4.4cm}|} 
		\caption{Tabela wymagañ funkcjonalnych aplikacji mobilnej}
		\label{tab:wymagania_aplikacja_mobilna}\\
		\hline
			Funkcja & Opis & Aktorzy \\	\hline
			Parowanie  urz¹dzeñ  bluetooth & Parowanie bluetooth urz¹dzenia mobilnego z Raspberry Pi &  Urz¹dzenie mobilne, RaspberryPi  \\ \hline
			Nawi¹zywanie po³¹czenia bluetooth & Nawi¹zanie po³¹czenia bluetooth z konkretnym zamkiem identyfikuj¹c go jednoznacznie adresem MAC & Urz¹dzenie mobilne, RaspberryPi \\ \hline
			Przes³anie pliku klucza cyfrowego & Przes³anie pliku zawieraj¹cego klucz cyfrowy do urz¹dzenia steruj¹cego zamkiem. Komputer steruj¹cy odsy³a wynik weryfikacji (pozytywny lub negatywny) & Urz¹dzenie mobilne, RaspberryPi \\ \hline
			Utworzenie  klucza cyfrowego dla goœci & Utworzenie specjalnego klucza cyfrowego o ograniczonym dostêpie oraz krótkim terminie wa¿noœci do u¿ytku dla goœci. Ka¿de ¿¹danie generowania klucza wymaga wpisania klucza bezpieczeñstwa & Urz¹dzenie mobilne, Aplikacja serwerowa, U¿ytkownik zalogowany \\ \hline
			Udostêpnianie klucza cyfrowego dla goœci & Udostêpnienie specjalnego klucza cyfrowego o ograniczonym dostêpie oraz krótkim terminie wa¿noœci poprzez np. wiadomoœæ MMS, bluetooth & Urz¹dzenie mobilne, U¿ytkownik zalogowany \\ \hline
			Wczytanie klucza cyfrowego z pliku & Umo¿liwia wczytanie do listy dostêpnych zamków pliku klucza cyfrowego & Urz¹dzenie mobilne,
			Goœæ \\ \hline
			Pobranie z serwera nowego klucza cyfrowego & Umo¿liwia pobranie z serwera klucza cyfrowego i dodanie go do listy dostêpnych zamków & Urz¹dzenie mobilne, Aplikacja serwerowa, U¿ytkownik zalogowany \\ \hline
			Proœba o przed³u¿enie wa¿noœci klucza & W celu przed³u¿enia wa¿noœci certyfikatu zostaje wys³ana proœba do administratora systemu & Urz¹dzenie mobilne, Aplikacja serwerowa, U¿ytkownik zalogowany \\ \hline
			Listowanie dostêpnych kluczy & Wyœwietlenie na ekranie telefonu listy dostêpnych kluczy do danych drzwi & Urz¹dzenie mobilne,
			Goœæ \\ \hline
			Modyfikacja danych kluczy cyfrowych & Modyfikacja nazw u¿ytkownika, zamków. Pozwala spersonalizowaæ opis zamków & Urz¹dzenie mobilne, Aplikacja serwerowa, U¿ytkownik zalogowany \\ \hline
			Szyfrowanie pliku klucza cyfrowego & Szyfrowanie algorytmem RSA klucza cyfrowego z wykorzystaniem klucza prywatnego & Urz¹dzenie mobilne \\ \hline
			Przechowywanie kluczy cyfrowych & Przechowywanie kluczy cyfrowych (szyfrowanych) w pamiêci telefonu & Urz¹dzenie mobilne \\ \hline
			Podgl¹d do historii akcji zamków & Umo¿liwia przegl¹danie historii akcji zamka, tzn. daty otwarcia przez kogo, daty zamkniêcia & Urz¹dzenie mobilne, Aplikacja serwerowa, Administrator \\ \hline
			Autoryzacja u¿ytkownika do aplikacji & Logowanie u¿ytkownika poprzez podanie has³a i loginu do odblokowania aplikacji & Urz¹dzenie mobilne, Aplikacja serwerowa, U¿ytkownik zalogowany \\ \hline
			Rejestracja u¿ytkownika & Za³o¿enie nowego konta u¿ytkownika w systemie & Urz¹dzenie mobilne, Aplikacja serwerowa, Goœæ \\ \hline
			Logowanie u¿ytkownika & Zalogowanie do systemu poprzez podanie adresu IP serwera, loginu oraz has³a & Urz¹dzenie mobilne, Aplikacja serwerowa, Goœæ \\ \hline
			Akceptacja przez administratora nowego u¿ytkownika & Administrator systemu mo¿e zaakceptowaæ i nadaæ uprawniania u¿ytkownika & Urz¹dzenie mobilne, Aplikacja serwerowa, Administrator \\ \hline
			Zarz¹dzanie wa¿noœci¹ certyfikatów dostêpu & Dodawanie, usuwanie wa¿noœci certyfikatów dostêpowych. Usuniêcie praw u¿ytkownika nie skutkuje uniewa¿nieniem wygenerowanych przez niego certyfikatów & Urz¹dzenie mobilne, Aplikacja serwerowa, Administrator \\ \hline
			Przes³anie awaryjnego klucza dostêpu & Umo¿liwia wczytanie specjalnego has³a 512-bitowego do Raspberry Pi, który otwiera zamek bez koniecznoœci dostêpu do Internetu & Urz¹dzenie mobilne, RaspberryPi, Administrator \\ \hline
			Tryb otwierania zamka & Komunikacja z Raspberry mo¿e odbywaæ siê automatycznie lub na ¿¹danie wyzwalane przyciskiem otwierania zamka z poziomu aplikacji & Urz¹dzenie mobilne, RaspberryPi, U¿ytkownik zalogowany \\ \hline
			Importowanie z pliku klucza prywatnego & Pobranie z pliku klucza prywatnego klucza dostêpowego & Urz¹dzenie mobilne\\ \hline
			Eksportowanie do pliku klucza prywatnego  & Przes³anie do pliku klucza prywatnego potrzebnego do szyfrowania kluczy dostêpowych & Urz¹dzenie mobilne\\ \hline
	\end{longtable}
	\newpage
	\textbf{Wymagania pozafunkcjonalne:}
	\begin{itemize*}
	\item narzut czasowy zwi¹zany z procesem szyfrowania kluczy cyfrowych (zale¿ny od parametrów urz¹dzenia mobilnego),
	\item zabezpieczenie transmisji danych poprzez szyfrowanie przy pomocy asymetrycznych kluczy cyfrowych,
	\item wymagany dostêp do Internetu do zarz¹dzania kluczami, czy logowania, 
	\item przyznanie uprawnieñ aplikacji do modu³u bluetooth, wysy³ania wiadomoœci MMS, Internetu,
	\item jêzyk aplikacji Polski,
	\item wersja androida minimalna 4.4, docelowa 5.0,
	\end{itemize*}
	\section{Aplikacja serwerowa obs³uguj¹ca bazê danych}
	Rol¹ serwera w tym systemie bêdzie przechowywanie danych dostêpowych w bazie danych MySQL oraz generowanie nowych kluczy cyfrowych poprzez program w jêzyku Python. Aplikacja serwerowa oparta powinna byæ o technologiê Python oraz serwera http Nginx. Serwer postawiony powinien byæ na odrêbnym urz¹dzeniu od instalacji zamka, lecz dopuszcza siê ze wzglêdów ekonomicznych równie¿ postawienie serwera na wybranym (jeœli w systemie znajduje siê wiele zamków) urz¹dzeniu Raspberry Pi.
	
	Funkcjonalnoœæ aplikacji serwerowej przedstawiona zosta³a w Tabeli \ref{tab:wymagania_serwer_baza_danych}.
	
	\begin{longtable}[!ht]{|p{3.5cm}|p{7.5cm}|p{3.7cm}|} 
		\caption{Tabela wymagañ funkcjonalnych aplikacji serwerowej}
		\label{tab:wymagania_serwer_baza_danych} \\
		\hline
		Funkcja & Opis & Aktorzy \\	\hline
		Utworzenie klucza cyfrowego u¿ytkownika & Utworzenie pseudolosowego 128-bitowego klucza prywatnego i publicznego u¿ytkownika potrzebnych do uwierzytelnienia kluczy dostêpowych  & Aplikacja serwerowa, U¿ytkownik zalogowany \\ \hline
		Kontrola uprawnieñ u¿ytkownika & Weryfikacja uprawnieñ u¿ytkownika do wykonania danej czynnoœci & Aplikacja serwerowa \\ \hline
		Modyfikowanie wpisów w bazie danych & Poœredniczenie w modyfikacji danych zawartych w bazie danych & Aplikacja serwerowa \\ \hline
		Przekazywanie wpisów z bazy danych & Poœredniczenie w przekazywaniu danych pobieranych z bazy danych & Aplikacja serwerowa \\ \hline
		Rejestrowanie ¿¹dañ dostêpu & Zapisywanie danych u¿ytkownika ubiegaj¹cego siê o dostêp do serwera & Aplikacja serwerowa \\ \hline
		Pobranie historii dostêpu zamka & Pobranie statystyk zwi¹zanych z histori¹ dostêpu do zamka & Aplikacja serwerowa, Administrator \\ \hline
		Zablokowanie dostêpu u¿ytkownika & Zablokowanie certyfikatu dostêpowego, np. w przypadku kradzie¿y telefonu & Aplikacja serwerowa, Administrator \\ \hline
	\end{longtable}
	\newpage
	\textbf{Wymagania niefunkcjonalne:}
	\begin{itemize*}
	\item ograniczenie pamiêci dostêpnej dla bazy danych (32Gb - pamiêæ niezbêdna dla systemu operacyjnego i oprogramowania),
	\item ograniczenie liczby obs³ugiwanych zamków zale¿na od wielkoœci dostêpnej pamiêci i liczby u¿ytkowników,
	\item narzut czasowy zwi¹zany z generowaniem nowych kluczy,
	\item ograniczenie liczby u¿ytkowników wykonuj¹cych jednoczeœnie ¿¹dania do serwera - 9 urz¹dzeñ,
	\item wymagany system operacyjny Linux dedykowany pod Raspberry,
	\item dostêp do Internetu do po³¹czenia z zamkami i urz¹dzeniami mobilnymi,
	\item zabezpieczenie bazy danych has³em generowanym losowo.
	\end{itemize*}
	
	
	\chapter{Diagram przypadków u¿ycia}
	Diagram przypadków u¿ycia (funkcjonalnoœci) systemu wraz z opowiadaj¹cymi aktorami przedstawiono na Rysunku \ref{diagram:diagram przypadków_u¿ycia}.
	
	\begin{landscape}
		\begin{figure}[!h]
		\centering
		\includegraphics[width=27cm]{Obrazy/Diagram_przypadkow_uzycia.png}
		\caption{Diagram przypadków u¿ycia}
		\label{diagram:diagram przypadków_u¿ycia}
	\end{figure}
	\end{landscape}

	\chapter{Diagramy sekwencji}
	Diagramy poni¿ej przedstawione maj¹ mieæ na celu przybli¿yæ ogólne dzia³anie systemu. Schematy nie s¹ odzwierciedleniem poszczególnych przypadków u¿ycia, mo¿e zawieraæ nawet niepe³ne odniesienia do wielu. 
	\section*{Logowanie u¿ytkownika}
	Diagram \ref{diagram:Diagram sekwencji logowanie uzytkownika} opisuje proces logowania u¿ytkownika do aplikacji mobilnej z weryfikacj¹ danych na serwerze.
	\begin{figure}[!h]
		\centering
		\includegraphics[width=16cm]{Obrazy/Diagram_sekwencji_logowanie_uzytkownika.png}
		\caption{Diagram sekwencji logowanie u¿ytkownika}
		\label{diagram:Diagram sekwencji logowanie uzytkownika}
	\end{figure}
	
	\newpage
	\section*{Rejestracja u¿ytkownika}
	Diagram \ref{diagram:Diagram sekwencji rejestracja uzytkownika} opisuje proces rejestracji u¿ytkownika do systemu z weryfikacj¹ danych na serwerze oraz podjêciem decyzji przez administratora o przydzieleniu dostêpu.
	\begin{figure}[!h]
		\centering
		\includegraphics[width=16cm]{Obrazy/Diagram_sekwencji_rejestracja_uzytkownika.png}
		\caption{Diagram sekwencji rejestracja u¿ytkownika}
		\label{diagram:Diagram sekwencji rejestracja uzytkownika}
	\end{figure}

	\newpage
	\section*{Generowanie certyfikatu u¿ytkownika}
	Diagram \ref{diagram:Diagram sekwencji generowanie certyfikatu u¿ytkownika} przedstawia sekwencjê operacji podczas generowania certyfikatu u¿ytkownika oraz podjêcia decyzji przez administratora o przydzieleniu dostêpu.
	\begin{figure}[!h]
		\centering
		\includegraphics[width=16cm]{Obrazy/Diagram_sekwencji_generowanie_certyfikatu_uzytkownika.png}
		\caption{Diagram sekwencji generowanie certyfikatu u¿ytkownika}
		\label{diagram:Diagram sekwencji generowanie certyfikatu u¿ytkownika}
	\end{figure}
	
	\newpage
	\section*{Generowanie certyfikatu dla goœcia}
	Diagram \ref{diagram:Diagram sekwencji generowanie certyfikatu goœcia} przedstawia sekwencjê operacji podczas generowania certyfikatu dla goœcia przez u¿ytkownika zalogowanego wraz z wyborem okresu wa¿noœci klucza oraz udostêpnienie certyfikatu goœciowi.
	\begin{figure}[!h]
		\centering
		\includegraphics[width=16cm]{Obrazy/Diagram_sekwencji_generowanie_certyfikatu_goscia.png}
		\caption{Diagram sekwencji generowanie certyfikatu goœcia}
		\label{diagram:Diagram sekwencji generowanie certyfikatu goœcia}
	\end{figure}

	\newpage
	\section*{Importowanie certyfikatu z serwera}
	Diagram \ref{diagram:Diagram sekwencji importowanie certyfikatu z serwera} opisuje operacjê importowania certyfikatu z serwera.
	\begin{figure}[!h]
		\centering
		\includegraphics[width=16cm]{Obrazy/Diagram_sekwencji_importowanie_certyfikatu_z_serwera.png}
		\caption{Diagram sekwencji generowanie importowanie certyfikatu z serwera}
		\label{diagram:Diagram sekwencji importowanie certyfikatu z serwera}
	\end{figure}

	\section*{Importowanie certyfikatu z pliku}
	Diagram \ref{diagram:Diagram sekwencji generowanie importowanie certyfikatu z pliku} opisuje operacjê importowania certyfikatu z pliku.
	\begin{figure}[!h]
		\centering
		\includegraphics[width=16cm]{Obrazy/Diagram_sekwencji_importowanie_certyfikatu_z_pliku.png}
		\caption{Diagram sekwencji generowanie importowanie certyfikatu z pliku}
		\label{diagram:Diagram sekwencji generowanie importowanie certyfikatu z pliku}
	\end{figure}

	\newpage
	\section*{Modyfikacja certyfikatu}
	Diagram \ref{diagram:Diagram sekwencji modyfikacji certyfikatu} opisuje proces modyfikacji, przez administratora, certyfikatów znajduj¹cych siê w bazie danych.
	\begin{figure}[!h]
		\centering
		\includegraphics[width=16cm]{Obrazy/Diagram_sekwencji_modyfikacja_certyfikatu.png}
		\caption{Diagram sekwencji modyfikacji certyfikatu}
		\label{diagram:Diagram sekwencji modyfikacji certyfikatu}
	\end{figure}
	
	\newpage
	\section*{Otwieranie zamka}
	Diagram \ref{diagram:Diagram sekwencji otwieranie zamka} przedstawia operacje wykonywane podczas otwierania zamka wraz z jego automatycznym zamkniêciem.
	\begin{figure}[!h]
		\centering
		\includegraphics[width=16cm]{Obrazy/Diagram_sekwencji_otwieranie_zamka.png}
		\caption{Diagram sekwencji otwieranie zamka}
		\label{diagram:Diagram sekwencji otwieranie zamka}
	\end{figure}

	\newpage
	\section*{Wybór sposobu otwierania zamka}
	Diagram \ref{diagram:Diagram sekwencji ustawienia sposobu otwierania zamka} przedstawia operacje wykonywane podczas wyboru sposobu otwierania zamka.
	\begin{figure}[!h]
		\centering
		\includegraphics[width=14.5cm]{Obrazy/Diagram_sekwencji_wybor_sposobu_otwierania_zamka.png}
		\caption{Diagram sekwencji ustawienia sposobu otwierania zamka}
		\label{diagram:Diagram sekwencji ustawienia sposobu otwierania zamka}
	\end{figure}

	\newpage
	\section*{Eksportowanie klucza prywatnego u¿ytkownika}
	Diagram \ref{diagram:Diagram_sekwencji_eksportowania_klucza_prywatnego_uzytkownika} opisuje operacjê eksportowania klucza prywatnego u¿ytkownika.
	\begin{figure}[!h]
		\centering
		\includegraphics[width=16cm]{Obrazy/Diagram_sekwencji_eksportowanie_klucza_prywatnego_uzytkownika.png}
		\caption{Diagram sekwencji eksportowania klucza prywatnego u¿ytkownika}
		\label{diagram:Diagram_sekwencji_eksportowania_klucza_prywatnego_uzytkownika}
	\end{figure}

	\section*{Importowanie klucza prywatnego u¿ytkownika}
	Diagram \ref{diagram:Diagram_sekwencji_importowanie_klucza_prywatnego_uzytkownika} opisuje operacjê importowania klucza prywatnego u¿ytkownika.
	\begin{figure}[!h]
		\centering
		\includegraphics[width=16cm]{Obrazy/Diagram_sekwencji_importowanie_klucza_prywatnego_uzytkownika.png}
		\caption{Diagram sekwencji importowanie klucza prywatnego u¿ytkownika}
		\label{diagram:Diagram_sekwencji_importowanie_klucza_prywatnego_uzytkownika}
	\end{figure}
	
\chapter{Diagramy Klas}
	\section*{Urz¹dzenie steruj¹ce}
	Diagram \ref{diagram:Diagram_klas_urzadzenia_sterujacego} przedstawia opis klas znajduj¹cych siê w urz¹dzeniu steruj¹cym.
	
	\begin{figure}[!h]
		\centering
		\includegraphics[width=15cm]{Obrazy/Diagram_klas_urzadzenie_sterujace.png}
		\caption{Diagram klas urz¹dzenia steruj¹cego}
		\label{diagram:Diagram_klas_urzadzenia_sterujacego}
	\end{figure}
	
	\section*{Aplikacja mobilna}
	Diagram \ref{diagram:Diagram_klas_aplikacji_mobilnej} przedstawia opis klas znajduj¹cych siê w aplikacji mobilnej.
	
	\begin{landscape}
	\begin{figure}[!h]
		\centering
		\includegraphics[width=27cm]{Obrazy/Diagram_klas_aplikacja_mobilna.png}
		\caption{Diagram klas aplikacji mobilnej}
		\label{diagram:Diagram_klas_aplikacji_mobilnej}
	\end{figure}
	\end{landscape}

	\section*{Aplikacja serwerowa}
	
	Diagram \ref{diagram:Diagram_klas_aplikacji_serwerowej} przedstawia opis klas znajduj¹cych siê w aplikacji serwerowej.
	
	\begin{figure}[!h]
		\centering
		\includegraphics[width=15cm]{Obrazy/Diagram_klas_aplikacja_serwerowa.png}
		\caption{Diagram klas aplikacji serwerowej}
		\label{diagram:Diagram_klas_aplikacji_serwerowej}
	\end{figure}

\chapter{Projekt bazy danych}
	Baza danych przechowywaæ bêdzie sk³adaæ siê z piêciu tabel:
	\begin{itemize*}
	\item \textbf{USERS} - przechowuje dane u¿ytkowników oraz dane niezbêdne przy weryfikacji logowania,
	\item \textbf{LOCKS} - zawiera informacje na temat dostêpnych w systemie zamków,
	\item \textbf{ACCESS\_TO\_LOCKS} - archiwizuje próby u¿ycia certyfikatów,
	\item \textbf{LOCKS\_KEYS} - zawiera wszystkie klucze dostêpowe u¿ytkowników. 
	\end{itemize*}

	Wiersz tabeli USERS zawieraæ musi:
	\begin{itemize*}
	\item \textbf{ID\_USER} - unikalny identyfikator (klucz g³ówny) u¿ytkownika sk³adaj¹cy siê z 10 cyfr,
	\item \textbf{LOGIN} - unikalna nazwa u¿ytkownika niezbêdna podczas logowania, zawieraj¹ca nie wiêcej ni¿ 255 znaków,
	\item \textbf{PASSWORD} - has³o zapisane w postaci skrótu, potrzebne do autoryzacji dostêpu u¿ytkownikowi,
	\item \textbf{PUBLIC\_KEY} - klucz publiczny u¿ytkownika potrzebny do podpisu cyfrowego,
	\item \textbf{NAME} - imiê u¿ytkownika,
	\item \textbf{SURNAME} - nazwisko u¿ytkownika,
	\item \textbf{IS\_ADMIN} - pole boolowskie wskazuj¹ce czy dany u¿ytkownik jest administratorem czy nie.
	\end{itemize*}

	Zamek opisywany jest poprzez kolumny:
	\begin{itemize*}
	\item \textbf{ID\_LOCK} - unikalny identyfikator (klucz g³ówny) zamka sk³adaj¹cy siê z 10 cyfr,
	\item \textbf{NAME} - unikalna nazwa zamka,
	\item \textbf{MAC\_ADDRESS} - adres fizyczny urz¹dzenia steruj¹cego zamkiem,
	\item \textbf{LOCALIZATION} - nieobowi¹zkowe pole opisuj¹ce fizyczne po³o¿enie zamka.
	\end{itemize*}
\newpage

	Klucz dostêpowy sk³ada siê z:
	\begin{itemize*}
	\item \textbf{ID\_KEY} - unikalny identyfikator (klucz g³ówny) klucza dostêpowego sk³adaj¹cy siê z 10 cyfr,
	\item \textbf{ID\_LOCK} - klucz obcy do tabeli przechowuj¹cej dostêpne zamki,
	\item \textbf{ID\_USER} - klucz obcy do tabeli przechowuj¹cej dane u¿ytkownika, jest to pole s³u¿¹ce do okreœlenia kto utworzy³ klucz dostêpu,
	\item \textbf{KEY} - unikalna wartoœæ certyfikatu dostêpu,
	\item \textbf{FROM} - data od której obowi¹zuje klucz,
	\item \textbf{TO} - data do której obowi¹zuje klucz,
	\item \textbf{ISACTUAL} - data wygaœniêcia klucza, jeœli równa TO, oznacza to ¿e klucz utraci³ wa¿noœæ z powodu czasu, jeœli ró¿na oznacza, to ¿e zablokowano z innego powodu wa¿noœæ,
	\item \textbf{MONDAY} - s³owne okreœlenie, w których godzinach zostanie przyznany dostêp w poniedzia³ki,
	\item \textbf{TUESDAY} - s³owne okreœlenie, w których godzinach zostanie przyznany dostêp we wtorki,
	\item \textbf{WEDNESDAY} - s³owne okreœlenie, w których godzinach zostanie przyznany dostêp w œrody,
	\item \textbf{THURSDAY} - s³owne okreœlenie, w których godzinach zostanie przyznany dostêp w czwartki,
	\item \textbf{FRIDAY} - s³owne okreœlenie, w których godzinach zostanie przyznany dostêp w pi¹tki,
	\item \textbf{SATURDAY} - s³owne okreœlenie, w których godzinach zostanie przyznany dostêp w soboty,
	\item \textbf{SUNDAY} - s³owne okreœlenie, w których godzinach zostanie przyznany dostêp w niedziele,
	\item \textbf{IS\_PERNAMENT} - zmienna boolowska oznaczaj¹ca czy dostêp jest zawsze,
	\item \textbf{NAME} - imiê osoby, której dotyczy certyfikat,
	\item \textbf{SURNAME} - nazwisko osoby, której dotyczy certyfikat.
	\end{itemize*}

	W tabeli archiwizuj¹cej akcje na zamku znajduj¹ siê takie dane jak:
	\begin{itemize*}
	\item \textbf{ID} - unikalny identyfikator (klucz g³ówny) akcji wykonanej na certyfikacie sk³adaj¹cy siê z 10 cyfr,
	\item \textbf{ID\_KEY} - klucz obcy do tabeli przechowuj¹cej klucze dostêpowe, dziêki tej informacji mo¿emy uzyskaæ dane o zamku, który zosta³ otwierany jak równie¿ do kogo nale¿a³ klucz,
	\item \textbf{DATE} - dok³adna data z godzin¹ u¿ycia klucza dostêpowego,
	\item \textbf{ACCESS} - binarna flaga informuj¹ca czy dostêp zosta³ przyznany czy odmówiony.
	\end{itemize*}

	Diagramy bazy danych odpowiednio encji i relacji przedstawione zosta³y na Rysunkach \ref{diagram:diagram encji} i \ref{diagram:diagram relacji}.  
	
	\begin{figure}[!h]
		\centering
		\includegraphics[width=16cm]{Obrazy/Diagram_encji.png}
		\caption{Diagram encji bazy danych}
		\label{diagram:diagram encji}
	\end{figure}

	\begin{figure}[!h]
		\centering
		\includegraphics[width=16cm]{Obrazy/Diagram_relacji.png}
		\caption{Diagram relacji bazy danych}
		\label{diagram:diagram relacji}
	\end{figure}

	\chapter{Zabezpieczenia systemu}
	Inteligentny zamek ma na celu zabezpieczanie wejœcia do pomieszczeñ, dlatego sam system powinien byæ równie¿ bezpieczny. Podstawowymi elementami jakie nale¿y chroniæ s¹:
	\begin{itemize*}
		\item has³a,
		\item dane u¿ytkowników,
		\item wa¿niejsze funkcje systemu (tj. generowanie nowych kluczy),
		\item transmisjê danych,
		\item zasilanie urz¹dzenia,
		\item dostêpnoœæ do instalacji.
	\end{itemize*}
	
	Has³a przechowywane powinny byæ w bazie danych w postaci skrótu funkcji SHA-3. Ka¿de has³o sk³adaæ powinno siê z przynajmniej 6 znaków i zawieraæ co najmniej jedn¹ cyfrê.
	
	Ogólne dane u¿ytkowników znajdowaæ siê bêd¹ w bazie danych, do której jedynie bezpoœredni dostêp bêdzie z aplikacji serwera lub z konta administratora. Has³o dostêpu generowane powinny byæ za pomoc¹ generatora liczb pseudolosowych i byæ o d³ugoœci co najmniej 400bitów oraz przechodziæ podstawowe testy losowoœci.
	
	Zabezpieczeniem wa¿niejszych (wra¿liwych) funkcji systemu odbywaæ siê bêdzie po stronie aplikacji serwerowej. Serwer bêdzie zezwala³ tylko na operacje dozwolone dla danego typu u¿ytkownika. Do wra¿liwych funkcji nale¿y przede wszystkim pobieranie danych z bazy danych oraz ich modyfikacje. Inn¹ form¹ zabezpieczenia operacji bêdzie podawanie has³a, mimo i¿ u¿ytkownik bêdzie zalogowany. Weryfikacja has³a ma na celu ochronê przed chwilowym przejêciem telefonu i wygenerowaniem np. sobie dostêpu do zamka.
	
	Ka¿de po³¹czenie internetowe pomiêdzy mikrokomputerem Raspberry Pi i serwerem bêdzie zabezpieczone protoko³em IPSec. Komunikacja bluetooth nie bêdzie szyfrowana, lecz certyfikaty przesy³ane bêd¹ podpisane cyfrowo kluczem asymetrycznym RSA. Pary kluczy (prywatny i publiczny) bêd¹ przypisane do danego certyfikatu i trac¹ce wa¿noœæ wraz z nim.
	
	Zabezpieczeniem fizycznym systemu przed utrat¹ zasilania z sieci energetycznej, bêdzie zamontowanie równolegle zasilania bateryjnego za³¹czanego w momencie zaniku g³ównego. Ochron¹ systemu przed ingerencj¹ w sprzêt bêdzie umieszczenie zabudowanego mikrokomputera po wewnêtrznej stronie pomieszczenia, tak ¿eby dostêp mia³y tylko osoby które mia³y pozwolenie przejœæ przez drzwi.
	
\chapter{Widok graficzny systemu}
	Jedynym elementem graficznym systemu Inteligentnego Zamka jest aplikacja znajduj¹ca siê na urz¹dzeniach mobilnych. Poni¿ej opisano,krótko poszczególne widoki wykonane w œrodowisku Android Studio.
	
	\section*{Panel logowania u¿ytkownika}
	Widok umo¿liwia zalogowanie siê u¿ytkownika do systemu poprzez podanie loginu i has³a w odpowiednie pola, a nastêpnie klikniêcie w przycisk “ZALOGUJ SIÊ”. Jeœli nie posiada siê konta, mo¿na je utworzyæ poprzez przycisk “ZAREJESTRUJ SIÊ” lub przejœæ do panelu Goœcia przyciskiem “GOŒÆ”. (Rysunek \ref{rys:panel_logowania_pionowo} i \ref{rys:panel_logowania_poziomo})
	
	\begin{figure}[h]
		\begin{minipage}{0.4\textwidth}
			\includegraphics[width=0.75\textwidth]{Obrazy/logowanie_uzytkownika_pionowo}
			\caption{Panel logowania u¿ytkownika (pionowo)}
			\label{rys:panel_logowania_pionowo}
		\end{minipage}
		\begin{minipage}{0.6\textwidth}
			\includegraphics[width=\textwidth]{Obrazy/logowanie_uzytkownika_poziomo}
			\caption{Panel logowania u¿ytkownika (poziomo)}
			\label{rys:panel_logowania_poziomo}	
		\end{minipage}
	\end{figure}
	\newpage
	
	\section*{Panel rejestracji u¿ytkownika}
	Panel rejestracji s³u¿y do utworzenie nowego u¿ytkownika poprzez podanie loginu, has³a, imienia i nazwiska. Po upewnieniu siê, ¿e wszystkie dane s¹ poprawne, aby zakoñczyæ proces rejestracji, klikamy przycisk “ZAREJESTRUJ”. (Rysunek \ref{rys:panel_rejestracji_pionowo} i \ref{rys:panel_rejestracji_poziomo})
	
	\begin{figure}[h]
		\begin{minipage}{0.4\textwidth}
			\includegraphics[width=0.9\textwidth]{Obrazy/rejestracja_uzytkownika_pionowo}
			\caption{Panel logowania u¿ytkownika (pionowo)}
			\label{rys:panel_rejestracji_pionowo}
		\end{minipage}
		\begin{minipage}{0.6\textwidth}
			\includegraphics[width=\textwidth]{Obrazy/rejestracja_uzytkownika_poziomo}
			\caption{Panel logowania u¿ytkownika (poziomo)}
			\label{rys:panel_rejestracji_poziomo}	
		\end{minipage}
	\end{figure}
	\newpage
	
	\section*{Panel listy zamków}
	Widok listy dostêpnych zamków przedstawia listê nazw zamków do jakich dany u¿ytkownik ma dostêp. U³atwieniem jest mo¿liwoœæ sortowania wyników i wyszukiwanie po nazwach. Klikniêcie w nazwê zamka powoduje otwarcie zamka. Ustawiæ mo¿na równie¿ zamek, który ma byæ otwierany automatycznie gdy jest siê w pobli¿u zamka. (Rysunek \ref{rys:panel_listy_dostepnych_zamkow_pionowo} i \ref{rys:panel_listy_dostepnych_zamkow_poziomo})
	
	\begin{figure}[h]
		\begin{minipage}{0.4\textwidth}
			\includegraphics[width=0.9\textwidth]{Obrazy/lista_dostepnych_zamkow_pionowo}
			\caption{Lista dostêpnych zamków (pionowo)}
			\label{rys:panel_listy_dostepnych_zamkow_pionowo}
		\end{minipage}
		\begin{minipage}{0.6\textwidth}
			\includegraphics[width=\textwidth]{Obrazy/lista_dostepnych_zamkow_poziomo}
			\caption{Lista dostêpnych zamków (poziomo)}
			\label{rys:panel_listy_dostepnych_zamkow_poziomo}	
		\end{minipage}
	\end{figure}
	\newpage
	
	\section*{Panel boczny}
	Panel boczny pozwala na szybkie prze³¹czanie pomiêdzy widokami. Chowany jest po lewej stronie ekranu. Umo¿liwia przechodzenie odpowiednio do listy zamków, zarz¹dzania certyfikatami, panelu administracyjnego oraz ustawieñ. (Rysunek \ref{rys:panel_boczny_pionowo} i \ref{rys:panel_boczny_poziomo})
	
	\begin{figure}[h]
		\begin{minipage}{0.4\textwidth}
			\includegraphics[width=0.9\textwidth]{Obrazy/panel_boczny_pionowo}
			\caption{Panel boczny (pionowo)}
			\label{rys:panel_boczny_pionowo}
		\end{minipage}
		\begin{minipage}{0.6\textwidth}
			\includegraphics[width=\textwidth]{Obrazy/panel_boczny_poziomo}
			\caption{Panel boczny (poziomo)}
			\label{rys:panel_boczny_poziomo}
		\end{minipage}	
	\end{figure}
	\newpage
	
	\section*{Panel zarz¹dzania certyfikatami}
	Panel zarz¹dzania certyfikatami umo¿liwia wybór funkcji dodania certyfikatu w dwóch wariantach (rozwijana lista) - dodania z pliku lub œci¹gniêcia z serwera. Kolejne pozycje to lista posiadanych certyfikatów, wys³anie wniosku o utworzenie nowego certyfikatu oraz ostatnia opcja to wygenerowanie certyfikatu dla goœcia. (Rysunek \ref{rys:panel_zarz¹dzania_certyfikatami_pionowo} i \ref{rys:panel_zarz¹dzania_certyfikatami_poziomo})
	
	\begin{figure}[h]
		\begin{minipage}{0.4\textwidth}
			\includegraphics[width=0.9\textwidth]{Obrazy/zarzadzaj_certyfikatami_pionowo}
			\caption{Panel zarz¹dzania certyfikatami (pionowo)}
			\label{rys:panel_zarz¹dzania_certyfikatami_pionowo}
		\end{minipage}
		\begin{minipage}{0.6\textwidth}
			\includegraphics[width=\textwidth]{Obrazy/zarzadzaj_certyfikatami_poziomo}
			\caption{Panel zarz¹dzania certyfikatami (poziomo)}
			\label{rys:panel_zarz¹dzania_certyfikatami_poziomo}	
		\end{minipage}
	\end{figure}
	\newpage

	\section*{Panel listy certyfikatów}
	Panel listy certyfikatów, jest list¹ aktualnych certyfikatów nale¿¹cych do u¿ytkownika. Klikniêcie w dany certyfikat przenosi do widoku szczegó³owego zwi¹zanego z operacjami na certyfikacie. (Rysunek \ref{rys:panel_listy_certyfikatów_pionowo} i \ref{rys:panel_listy_certyfikatów_poziomo})
	
	\begin{figure}[h]
		\begin{minipage}{0.4\textwidth}
			\includegraphics[width=0.9\textwidth]{Obrazy/lista_certyfikatow_pionowo}
			\caption{Panel listy certyfikatów (pionowo)}
			\label{rys:panel_listy_certyfikatów_pionowo}
		\end{minipage}
		\begin{minipage}{0.6\textwidth}
			\includegraphics[width=\textwidth]{Obrazy/lista_certyfikatow_poziomo}
			\caption{Panel listy certyfikatów (poziomo)}
			\label{rys:panel_listy_certyfikatów_poziomo}	
		\end{minipage}
	\end{figure}
	\newpage
	
	\section*{Panel certyfikatu}
	Panel certyfikatu u góry zawiera nazwê certyfikatu, poni¿ej informacje o dacie wygaœniêcia, którego zamku dotyczy oraz w jakim czasie przyznaje dostêp. Na dole dostêpne s¹ dwa przyciski pozwalaj¹ce usun¹æ certyfikat lub wys³aæ proœbê o przed³u¿enie wa¿noœci. (Rysunek \ref{rys:panel_certyfikatu_pionowo} i \ref{rys:panel_certyfikatu_poziomo})
	
	\begin{figure}[h]
		\begin{minipage}{0.4\textwidth}
			\includegraphics[width=0.7\textwidth]{Obrazy/certyfikat_pionowo}
			\caption{Panel certyfikatu (pionowo)}
			\label{rys:panel_certyfikatu_pionowo}
		\end{minipage}
		\begin{minipage}{0.6\textwidth}
			\includegraphics[width=\textwidth]{Obrazy/certyfikat_poziomo}
			\caption{Panel certyfikatu (poziomo)}
			\label{rys:panel_certyfikatu_poziomo}	
		\end{minipage}
	\end{figure}
	
	\section*{Panel wnioskowania o certyfikat}
	Panel wnioskowania o certyfikat polega na wybraniu z listy wszystkich zamków, konkretnego do którego chcemy uzyskaæ dostêp i wys³aæ wniosek o przydzielenie dostêpu. (Rysunek \ref{rys:panel_wnioskowania_o_certyfikat_pionowo} i \ref{rys:panel_wnioskowania_o_certyfikat_poziomo})
	
	\begin{figure}[h]
		\begin{minipage}{0.4\textwidth}
			\includegraphics[width=0.7\textwidth]{Obrazy/wnioskuj_o_certyfikat_pionowo}
			\caption{Panel wnioskowania o certyfikat (pionowo)}
			\label{rys:panel_wnioskowania_o_certyfikat_pionowo}
		\end{minipage}
		\begin{minipage}{0.6\textwidth}
			\includegraphics[width=\textwidth]{Obrazy/wnioskuj_o_certyfikat_poziomo}
			\caption{Panel wnioskowania o certyfikat (poziomo)}
			\label{rys:panel_wnioskowania_o_certyfikat_poziomo}	
		\end{minipage}
	\end{figure}
	\newpage
	
	\section*{Panel tworzenia certyfikatu dla goœcia}
	Panel tworzenia certyfikatu goœcia sk³ada siê z danych goœcia (imiê i nazwisko), daty, od której obowi¹zuje certyfikat, zamka którego dotyczy oraz jak d³ugo pozostanie wa¿ny (wybór z rozwijanej listy). Aby zakoñczyæ proces generowania nale¿y klikn¹æ przycisk “WYGENERUJ”. (Rysunek \ref{rys:panel_generowanie_nowego_klucza_goscia_pionowo} i \ref{rys:panel_generowanie_nowego_klucza_goscia_poziomo})
	
	\begin{figure}[h]
		\begin{minipage}{0.4\textwidth}
			\includegraphics[width=0.9\textwidth]{Obrazy/generowanie_nowego_klucza_goscia_pionowo}
			\caption{Panel tworzenia certyfikatu dla goœcia (pionowo)}
			\label{rys:panel_generowanie_nowego_klucza_goscia_pionowo}
		\end{minipage}
		\begin{minipage}{0.6\textwidth}
			\includegraphics[width=\textwidth]{Obrazy/generowanie_nowego_klucza_goscia_poziomo}
			\caption{Panel tworzenia certyfikatu dla goœcia (poziomo)}
			\label{rys:panel_generowanie_nowego_klucza_goscia_poziomo}	
		\end{minipage}
	\end{figure}
	\newpage
	
	\section*{Panel administratora}
	W panelu administratora znajduj¹ siê 6 przycisków do administrowania systemem zamków:
	\begin{itemize*}
	\item ,,Historia u¿ycia zamków''
	\item ,,Generowanie nowego certyfikatu'',
	\item ,,Zarz¹dzanie certyfikatami u¿ytkowników'',
	\item ,,Lista oczekuj¹cych u¿ytkowników do zarejestrowania'',
	\item ,,Lista oczekuj¹cych certyfikatów do zaakceptowania'',
	\item ,,Klucz awaryjny''.
	\end{itemize*}

	Po klikniêciu ka¿dego przycisku przechodzi siê do nowego odpowiadaj¹cego widoku. (Rysunek \ref{rys:panel_administracyjny_pionowo} i \ref{rys:panel_administracyjny_poziomo})
	
	\begin{figure}[h]
		\begin{minipage}{0.4\textwidth}
			\includegraphics[width=0.9\textwidth]{Obrazy/panel_administracyjny_pionowo}
			\caption{Panel administratora (pionowo)}
			\label{rys:panel_administracyjny_pionowo}
		\end{minipage}
		\begin{minipage}{0.6\textwidth}
			\includegraphics[width=\textwidth]{Obrazy/panel_administracyjny_poziomo}
			\caption{Panel administratora (poziomo)}
			\label{rys:panel_administracyjny_poziomo}	
		\end{minipage}
	\end{figure}
	\newpage
	
	\section*{Panel historii u¿ycia zamków}
	Panel historii u¿ycia zamków sk³ada siê z rozwijanej listy wszystkich zamków znaj¹cych siê w systemie, s³u¿¹cej do filtrowania wyników. Dodatkowo wybraæ mo¿na okres z jakiego wyniki s¹ prezentowane. Pozycje opisane kolorem czerwonym dotycz¹ operacji odrzucanych, bia³e przyznaj¹cych dostêp do zamka. (Rysunek \ref{rys:panel_historii_uzycia_zamka_pionowo} i \ref{rys:panel_historii_uzycia_zamka_poziomo})
	
	\begin{figure}[h]
		\begin{minipage}{0.4\textwidth}
			\includegraphics[width=0.9\textwidth]{Obrazy/historia_zamkow_pionowo}
			\caption{Panel historii u¿ycia zamków (pionowo)}
			\label{rys:panel_historii_uzycia_zamka_pionowo}
		\end{minipage}
		\begin{minipage}{0.6\textwidth}
			\includegraphics[width=\textwidth]{Obrazy/historia_zamkow_poziomo}
			\caption{Panel historii u¿ycia zamków (poziomo)}
			\label{rys:panel_historii_uzycia_zamka_poziomo}	
		\end{minipage}
	\end{figure}
	\newpage
	
	\section*{Panel generowania nowego certyfikatu (administrator)}
	Panel generowanie nowego certyfikatu (administrator) s³u¿y do tworzenia nowych certyfikatów przez administratora. W pierwszych polach podaje siê imiê i nazwisko kogo dotyczy certyfikat. W nastêpnych administrator wybiera typ certyfikatu (goœæ / u¿ytkownik zalogowany). W zale¿noœci od wyboru dostêpne s¹ okreœlone pola. Wspólne to od kiedy jest dostêp i jakiego zamka dotyczy. Dla goœcia nale¿y wybraæ na jak d³ugo jest dostêp, a dla zalogowanego u¿ytkownika do kiedy jest wa¿noœæ i w jakich godzinach danych dni tygodni ma dostêp (po klikniêciu przycisku "ZAKRES OBOWI¥ZYWANIA CERTYFIKATU" przechodzi siê do widoku wyboru zakresu godziny). (Rysunek \ref{rys:panel_generowanie_nowego_klucza_gosc_admin_pioniowo}, \ref{rys:panel_generowanie_nowego_klucza_admin_poziomo}, \ref{rys:panel_generowanie_nowego_klucza_uzytkownik_zalogowany_admin_pioniowo} i 
	\ref{rys:panel_wyboru_zakresu_certyfikatu})
	
	\begin{figure}[h]
		\vspace{-0.5cm}
		\begin{minipage}{0.4\textwidth}
			\includegraphics[width=0.75\textwidth]{Obrazy/generowanie_nowego_klucza_gosc_admin_pioniowo}
			\caption{Panel generowania nowego klucza dla goœcia (administrator) (pionowo)}
			\label{rys:panel_generowanie_nowego_klucza_gosc_admin_pioniowo}
		\end{minipage}
	\hspace{0.5cm}
		\begin{minipage}{0.6\textwidth}
			\includegraphics[width=\textwidth]{Obrazy/generowanie_nowego_klucza_admin_poziomo}
			\caption{Panel generowania nowego klucza (administrator)(poziomo)}
			\label{rys:panel_generowanie_nowego_klucza_admin_poziomo}	
		\end{minipage}
	\end{figure}
	\vspace{-0.5cm}
	\begin{figure}[h]
		\begin{minipage}{0.5\textwidth}
			\includegraphics[width=4.5cm]{Obrazy/generowanie_nowego_klucza_uzytkownik_zalogowany_admin_pioniowo}
			\caption{Panel generowania nowego klucza dla u¿ytkownika zalogowanego (administrator)(poziomo)}
			\label{rys:panel_generowanie_nowego_klucza_uzytkownik_zalogowany_admin_pioniowo}
		\end{minipage}
	\hspace{0.5cm}
		\begin{minipage}{0.5\textwidth}
			\includegraphics[width=4.5cm]{Obrazy/panel_wyboru_zakresu_certyfikatu}
			\caption{Panel panel wyboru zakresu certyfikatu}
			\label{rys:panel_wyboru_zakresu_certyfikatu}
		\end{minipage}
	\end{figure}
	\newpage
	
	\section*{Panel zarz¹dzania certyfikatami~(administrator)}
	Panel zarz¹dzania certyfikatami u¿ytkowników (administrator) jest widokiem tylko wszystkich aktywnych certyfikatów w systemie. Administrator klikaj¹c na pozycjê przechodzi do panelu certyfikatu opisanego wy¿ej. Tam mo¿e usun¹æ dostêp lub go przed³u¿yæ. U³atwieniem jest mo¿liwoœæ wyboru typu sortowania. (Rysunek \ref{rys:panel_lista_certyfikatow_administrator_pionowo} i \ref{rys:panel_lista_certyfikatow_administrator_poziomo})
	
	\begin{figure}[h]
		\begin{minipage}{0.4\textwidth}
			\includegraphics[width=0.9\textwidth]{Obrazy/lista_certyfikatow_administrator_pionowo}
			\caption{Panel zarz¹dzania certyfikatami (administrator) (pionowo)}
			\label{rys:panel_lista_certyfikatow_administrator_pionowo}
		\end{minipage}
		\begin{minipage}{0.6\textwidth}
			\includegraphics[width=\textwidth]{Obrazy/lista_certyfikatow_administrator_poziomo}
			\caption{Panel zarz¹dzania certyfikatami (administrator) (poziomo)}
			\label{rys:panel_lista_certyfikatow_administrator_poziomo}	
		\end{minipage}
	\end{figure}
	\newpage

	\section*{Panel~listy~oczekuj¹cych~u¿ytkowników~do~rejestracji}
	Panel listy oczekuj¹cych u¿ytkowników jest list¹ wszystkich goœci, którzy ubiegaj¹ siê o zarejestrowanie. PO klikniêciu w odpowiedni¹ pozycjê pojawiaj¹ siê dwie opcjê: “AKCEPTUJ” lub “ODRZUÆ”.  (Rysunek \ref{rys:panel_lista_oczekujacych_uzytkownikow_pionowo} i \ref{rys:panel_lista_oczekujacych_uzytkownikow_poziomo})
	
	\begin{figure}[h]
		\begin{minipage}{0.4\textwidth}
			\includegraphics[width=0.9\textwidth]{Obrazy/lista_oczekujacych_uzytkownikow_pionowo}
			\caption{Panel listy oczekuj¹cych u¿ytkowników (pionowo)}
			\label{rys:panel_lista_oczekujacych_uzytkownikow_pionowo}
		\end{minipage}
		\begin{minipage}{0.6\textwidth}
			\includegraphics[width=\textwidth]{Obrazy/lista_oczekujacych_uzytkownikow_poziomo}
			\caption{Panel listy oczekuj¹cych u¿ytkowników (poziomo)}
			\label{rys:panel_lista_oczekujacych_uzytkownikow_poziomo}	
		\end{minipage}
	\end{figure}
	\newpage
	
	\section*{Panel~listy~oczekuj¹cych~certyfikatów do~wygenerowania}
	Panel listy oczekuj¹cych certyfikatów jest list¹ wszystkich certyfikatów, które ubiegaj¹ siê o akceptacjê administratora. Po klikniêciu w odpowiedni¹ pozycjê pojawiaj¹ siê dwie opcjê: “AKCEPTUJ” lub “ODRZUÆ”.  (Rysunek \ref{rys:panel_lista_oczekujacych_certyfikatow_pionowo} i \ref{rys:panel_lista_oczekujacych_certyfikatow_poziomo})
	
	\begin{figure}[h]
		\begin{minipage}{0.4\textwidth}
			\includegraphics[width=0.7\textwidth]{Obrazy/lista_oczekujacych_certyfikatow_pionowo}
			\caption{Panel listy oczekuj¹cych certyfikatów (pionowo)}
			\label{rys:panel_lista_oczekujacych_certyfikatow_pionowo}
		\end{minipage}
		\begin{minipage}{0.6\textwidth}
			\includegraphics[width=\textwidth]{Obrazy/lista_oczekujacych_certyfikatow_poziomo}
			\caption{Panel listy oczekuj¹cych certyfikatów (poziomo)}
			\label{rys:panel_lista_oczekujacych_certyfikatow_poziomo}	
		\end{minipage}
	\end{figure}

	\section*{Panel klucza awaryjnego}
	Panel klucza awaryjnego s³u¿y do otwierania zamków w sytuacji awaryjnej, np. gdy zamek nie ma dostêpu do Internetu lub innej awarii. (Rysunek \ref{rys:panel_klucza_awaryjnego_pionowo} i \ref{rys:panel_klucza_awaryjnego_poziomo})
	
	\begin{figure}[h]
		\begin{minipage}{0.4\textwidth}
			\includegraphics[width=0.7\textwidth]{Obrazy/klucz_awaryjny_pionowo}
			\caption{Panel klucza awaryjnego (pionowo)}
			\label{rys:panel_klucza_awaryjnego_pionowo}
		\end{minipage}
		\begin{minipage}{0.6\textwidth}
			\includegraphics[width=0.7\textwidth]{Obrazy/klucz_awaryjny_poziomo}
			\caption{Panel klucza awaryjnego (poziomo)}
			\label{rys:panel_klucza_awaryjnego_poziomo}	
		\end{minipage}
	\end{figure}

	\section*{Panel ustawieñ konta}
	W panelu ustawieñ u¿ytkownik mo¿e zmieniæ has³o do swojego konta. Wymagane jest podanie starego has³a, a nastêpnie nowego. Aby zakoñczyæ czynnoœæ klikamy na “ZMIEÑ”. (Rysunek \ref{rys:panel_ustawienia_pionowo} i \ref{rys:panel_ustawienia_poziomo})
	
	\begin{figure}[h]
		\begin{minipage}{0.4\textwidth}
			\includegraphics[width=0.7\textwidth]{Obrazy/ustawienia_pionowo}
			\caption{Panel ustawieñ konta (pionowo)}
			\label{rys:panel_ustawienia_pionowo}
		\end{minipage}
		\begin{minipage}{0.6\textwidth}
			\includegraphics[width=\textwidth]{Obrazy/ustawienia_poziomo}
			\caption{Panel ustawieñ konta (poziomo)}
			\label{rys:panel_ustawienia_poziomo}	
		\end{minipage}
	\end{figure}
	\newpage
	
\chapter{Testowanie aplikacji}	
	G³ówne zagadnienia które nale¿y przetestowaæ:
	\begin{itemize*}
		\item generator liczb pseudolosowych,
		\item zasilanie urz¹dzeñ,
		\item wydajnoœæ systemu,
		\item komunikatywnoœæ aplikacji mobilnej (cz³owiek-system oraz system-cz³owiek),
		\item g³ówne funkcje systemu podczas operacji otwierania/zamykania zamków oraz dystrybucji kluczy,
	\end{itemize*}

	Generator liczb pseudolosowych powinien byæ przetestowany pod kontem testów losowoœci, takie jak test pojedynczych bitów, serii, d³ugiej serii, pokerowy oraz dwójkowy. Próby wykonywane powinny byæ wielokrotnie, dla wielu utworzonych próbek.
	
	System oparty jest o poprawne dzia³anie sprzêtu, nale¿y wiêc przetestowaæ reakcjê urz¹dzeñ na spadki napiêcia podczas spoczynku, pracy zwyk³ej oraz przy du¿ym obci¹¿eniu. Raspberry Pi w razie awarii zasilania sieciowego, prze³¹czyæ powinno siê na zasilanie bateryjne. Poprzez czêste prze³¹czanie sposobu zasiania, np. przy u¿yciu tranzystora nale¿y sprawdziæ, czy w trakcie przejœæ urz¹dzenie nie wy³¹czy siê z powodu krótkiego ca³kowitego zaniku napiêcia. Test zasilania zweryfikowaæ powinien równie¿ czas dzia³ania urz¹dzeñ pod zasilaniem bateryjnym.
	
	Testem wydajnoœci systemu jest sprawdzenie odpornoœci na przeci¹¿enia systemu, choæby przy wielu ¿¹daniach do serwera. System zak³ada obs³ugê wielu zamków przy jednym serwerze, dlatego nale¿y zweryfikowaæ dzia³anie bazy danych oraz aplikacji serwerowej pod k¹tem wielu zapytañ jednoczeœnie. Wykonaæ taki test mo¿na przy pomocy aplikacji Apache JMeter. Program zbada serwer pod k¹tem szybkoœci oraz odpowiedzi httprequest.
	
	Jedynym elementem kontaktuj¹cym siê z u¿ytkownikiem jest aplikacja mobilna. Program powinien w pierwszej fazie testów zostaæ sprawdzony automatycznie przy pomocy narzêdzia Robotium, pozwalaj¹cym na utworzeniu sekwencji operacji jakie maj¹ po sobie nast¹piæ, aby osi¹gn¹æ zamierzony efekt. Scenariusz testu obejmowaæ powinien reakcjê na: 
	\begin{itemize*}
		\item podanie b³êdnych kluczy dostêpowych podczas procesu otwierania zamka,
		\item z³ego lub przedawnionego klucza prywatnego,
		\item braku po³¹czenia z internetem,
		\item braku po³¹czenia bluetooth,
		\item b³êdnego logowania u¿ytkownika,
		\item niew³aœciwych danych przy rejestracji u¿ytkownika.
	\end{itemize*}

	Po przejœciu aplikacji przez testy automatyczne, nale¿y przekazaæ aplikacjê u¿ytkownikom, w pierwszej kolejnoœci posiadaj¹cym wiedzê informatyczn¹ oraz znaj¹cym za³o¿enia systemu. U¿ytkownicy wyra¿aj¹ opinie na temat dzia³ania, czytelnoœci aplikacji podczas ankiety. Nastêpnym krokiem jest testowanie aplikacji przez osoby nie posiadaj¹ce wiedzy informatycznej, lecz zaznajomione z tematyk¹ systemu. Ostatnim krokiem testów aplikacji s¹ testy przez u¿ytkowników bez wiedzy informatycznej oraz bez szczegó³owej wiedzy o tematyce projektu. Ka¿dy etap musi uzyskaæ pewien próg pozytywnych ocen, przy braku zdania testu nale¿y wróciæ do pocz¹tku. Ankieta zawieraæ powinna pytania na temat estetyki aplikacji, komunikatywnoœci z u¿ytkownikiem.
	
	Testowanie g³ównej funkcji systemu, tzn. otwierania/zamykania zamka oraz dystrybucji kluczy dostêpowych zrealizowane zostanie podczas wczeœniej wymienionych testów. Dodatkowo, równie¿ przy u¿yciu narzêdzia Robotium wykonane zostan¹ scenariusze przyk³adowych u¿yæ systemu. Przyk³adowy scenariusz:
	
	\begin{minipage}{12cm}
	{\noindent \scriptsize \textsl{U¿ytkownik zalogowany (UZ) wnioskuje o klucz dostêpowy do zamka A, B i C na  okres tygodnia. Administrator (AD) akceptuje wniosek dla zamka B i C, dla zamka A odrzuca. UZ tworzy klucz goœcia do zamka B jednorazowy (za³. powodzenie). UZ próbuje otworzyæ zamek B (za³. powodzenie). AD blokuje dostêp UZ do zamka B. Goœæ próbuje otworzyæ zamek B (za³. powodzenie). UZ próbuje otworzyæ ponownie zamek B (za³. niepowodzenie). Goœæ próbuje otworzyæ zamek B (za³. niepowodzenie). UZ próbuje utworzyæ klucz dostêpu dla goœcia do zamka B na 10 minut (za³. niepowodzenie). UZ próbuje utworzyæ klucz dostêpu dla goœcia do zamka C na 10 minut (za³. powodzenie). Goœæ próbuje otworzyæ zamek C (za³. powodzenie). Goœæ próbuje ponownie otworzyæ zamek C po up³ywie 10 minut (za³. niepowodzenie). UZ próbuje otworzyæ zamek C (za³. powodzenie). UZ próbuje otworzyæ zamek C po up³ywie tygodnia od utworzenia klucza dostêpu (za³. niepowodzenie).}}
	\end{minipage}
	
	Ka¿da operacja wykonana w scenariuszy bêdzie mierzona ile czasu zajmuje, pozwoli to na okreœlenie czasu oczekiwania aplikacji na odpowiedzi, w celu optymalizacji dzia³ania.
	
\end{document}